div(ng-if='isProjectMember()')
    h3 Add a Task
    .alert.alert-success(ng-show='successMessage') {{successMessage}}

    form.css-form(name = "form", novalidate)
        .form-group(ng-class="{'has-warning':form.description.$invalid && form.description.$touched}")
            label(for='description') Description * :
            textarea#description.form-control(type='description',name = "description",rows="3", ng-model='task.description', required="")
            span(ng-show='(!task.description) && form.description.$touched') You have to describe your new task

        .form-group
            label(for='in_charge') Dev in charge :
            select#in_charge.form-control(name="in_charge", ng-model='task.responsable'
            ng-options= "member as member.username for member in project.member_list track by member._id")

        .form-group(ng-class="{'has-warning':form.cost.$invalid && form.cost.$touched}")
            label(for='cost') Estimated cost (man/days) *:
            input#cost(name="cost",type='number', min="0", step="1", ng-model='task.estimated_cost', required="").form-control
            span(ng-show='(!task.estimated_cost) && form.cost.$touched') You have to define a cost

        .form-group
            md-button#bind_userstory_btn.md-primary.md-raised(ng-click='showUserStory($event)')
                | Bind UserStories

            md-button#bind_task_dependencies_btn.md-primary.md-raised(ng-click='showDependencies($event)')
                | Add Dependencies

        .form-group
            input#taskCreate_submit.btn.btn-default(ng-if="create", type='submit',ng-class="{'btn-success':form.$valid}",ng-disabled='form.$invalid', ng-click='createTask()', value='Create')
            input#taskUpdate_submit.btn.btn-default(ng-if="!create",type='submit',ng-class="{'btn-success':form.$valid}",ng-disabled='form.$invalid', ng-click='editTask()', value='Update')
            input#cancel_edit_task_button.btn.btn-default(type="button",ng-if="!create",ng-click='cancel()', value='Cancel')

